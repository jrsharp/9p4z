# 9P CoAP Cloud Client Sample Configuration for nRF boards
# Use: west build -b nrf7002dk/nrf5340/cpuapp -DCONF_FILE=prj_nrf.conf

# Enable 9P support
CONFIG_NINEP=y
CONFIG_NINEP_CLIENT=n
CONFIG_NINEP_SERVER=y
CONFIG_NINEP_TRANSPORT_COAP_CLIENT=y

# Message and resource limits
CONFIG_NINEP_MAX_MESSAGE_SIZE=8192
CONFIG_NINEP_MAX_FIDS=32
CONFIG_NINEP_MAX_TAGS=16

# Logging and console
CONFIG_LOG=y
CONFIG_NINEP_LOG_LEVEL_DBG=y

# Shell for WiFi configuration
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_SHELL_STACK_SIZE=5400
CONFIG_NET_SHELL=y
CONFIG_DNS_RESOLVER=y

# Heap for dynamic allocation (WiFi + CoAP client)
CONFIG_HEAP_MEM_POOL_SIZE=131072
CONFIG_NRF_WIFI_CTRL_HEAP_SIZE=20000
CONFIG_NRF_WIFI_DATA_HEAP_SIZE=168192

# Stack sizes for network threads
CONFIG_MAIN_STACK_SIZE=5200
CONFIG_NET_TX_STACK_SIZE=4096
CONFIG_NET_RX_STACK_SIZE=4096

# Networking - native stack with WiFi
CONFIG_NETWORKING=y
CONFIG_NET_L2_ETHERNET=y
CONFIG_NET_IPV4=y
CONFIG_NET_UDP=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_LOG=y

# CoAP client support
CONFIG_COAP=y
CONFIG_COAP_CLIENT=y
CONFIG_COAP_CLIENT_MAX_REQUESTS=2
CONFIG_COAP_EXTENDED_OPTIONS_LEN=y
CONFIG_COAP_EXTENDED_OPTIONS_LEN_VALUE=256

# WiFi support (requires nRF7002)
CONFIG_WIFI=y
CONFIG_WIFI_NRF70=y
CONFIG_NET_L2_WIFI_MGMT=y
CONFIG_WIFI_NM_WPA_SUPPLICANT=y
CONFIG_NET_L2_WIFI_SHELL=y
CONFIG_NRF_WIFI_LOW_POWER=n

# Network stack sizing
CONFIG_NET_PKT_RX_COUNT=60
CONFIG_NET_PKT_TX_COUNT=6
CONFIG_NET_BUF_RX_COUNT=60
CONFIG_NET_BUF_TX_COUNT=12
CONFIG_NET_CONTEXT_NET_PKT_POOL=y
CONFIG_NET_TC_TX_COUNT=1

# IP addressing - use DHCP
CONFIG_NET_CONFIG_SETTINGS=y
CONFIG_NET_CONFIG_NEED_IPV4=y
CONFIG_NET_DHCPV4=y

# Build output for flashing to hardware
CONFIG_BUILD_OUTPUT_HEX=y
