# Copyright (c) 2025 9p4z Contributors
# SPDX-License-Identifier: Apache-2.0

common:
  tags: ninep
  platform_allow: native_posix native_posix_64 qemu_x86 qemu_cortex_m3
  integration_platforms:
    - native_posix
  harness: ztest

tests:
  libraries.ninep.protocol:
    tags: ninep protocol unit
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
    min_ram: 32

  libraries.ninep.fid:
    tags: ninep fid unit
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
    min_ram: 32

  libraries.ninep.tag:
    tags: ninep tag unit
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
    min_ram: 32

  libraries.ninep.transport:
    tags: ninep transport integration
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
    min_ram: 32

  libraries.ninep.message:
    tags: ninep message integration
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
    min_ram: 32

  libraries.ninep.message_builder:
    tags: ninep message builder unit
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
    min_ram: 32

  libraries.ninep.uart_transport:
    tags: ninep uart transport integration
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
      - CONFIG_NINEP_TRANSPORT_UART=y
      - CONFIG_NINEP_SERVER=n
      - CONFIG_NINEP_CLIENT=n
      - CONFIG_SERIAL=y
      - CONFIG_UART_INTERRUPT_DRIVEN=y
      - CONFIG_UART_EMUL=y
    min_ram: 64

  libraries.ninep.client_server:
    tags: ninep client server integration
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
      - CONFIG_NINEP_SERVER=y
      - CONFIG_NINEP_CLIENT=y
      - CONFIG_HEAP_MEM_POOL_SIZE=16384
    min_ram: 128

  libraries.ninep.stress:
    tags: ninep stress regression
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
      - CONFIG_NINEP_SERVER=y
      - CONFIG_NINEP_CLIENT=y
      - CONFIG_HEAP_MEM_POOL_SIZE=16384
    min_ram: 128

  libraries.ninep.tcp_transport:
    tags: ninep tcp transport integration ipv6
    platform_allow: native_posix native_posix_64
    extra_configs:
      - CONFIG_ZTEST=y
      - CONFIG_NINEP=y
      - CONFIG_NINEP_SERVER=y
      - CONFIG_NINEP_CLIENT=y
      - CONFIG_NINEP_TRANSPORT_TCP=y
      - CONFIG_NETWORKING=y
      - CONFIG_NET_IPV4=y
      - CONFIG_NET_IPV6=y
      - CONFIG_NET_TCP=y
      - CONFIG_NET_SOCKETS=y
      - CONFIG_NET_LOOPBACK=y
      - CONFIG_TEST_RANDOM_GENERATOR=y
      - CONFIG_HEAP_MEM_POOL_SIZE=32768
      - CONFIG_NET_PKT_RX_COUNT=16
      - CONFIG_NET_PKT_TX_COUNT=16
      - CONFIG_NET_BUF_RX_COUNT=16
      - CONFIG_NET_BUF_TX_COUNT=16
    min_ram: 256